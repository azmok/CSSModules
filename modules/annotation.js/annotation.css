*{
   margin: 0;
   padding: 0;
   -webkit-box-sizing: border-box;
   -moz-box-sizing: border-box;
   box-sizing: border-box;
}
:root{
   --bg-desc: rgba(245,244,239,0.8);
   --bxsh-desc: 0px 1px 6px 2px rgba(10,10,10,0.15);
}
body{
   counter-reset: annotation-counter;
}
/*
.annotation,
.annotation *{
   border: 1px dotted red;
}
/*/
span.annotation{
   position: relative;
}

/* insert [num] */
span.annotation::before{
   color: red;
   font-size: 0.875rem;
   vertical-align: super;
   margin-left: -0.25rem;
   counter-increment: annotation-counter;
   content: '[' counter(annotation-counter) ']';
}

span.annotation > .desc,
span.annotation > .dogEar{
   display: none;
   position: absolute;
   left: -1rem;
   background: var(--bg-desc);/*
   background: orange;/**/
   border: 1px solid #ccc;
   -webkit-backdrop-filter: blur(2px);
   backdrop-filter: blur(2px);
}

/* togglable description block */
span.annotation > .desc{
   bottom: calc(100% + 1rem);
   min-width: 5rem;
   max-width: 30vw;
   padding: 0.5em;
   font-size: 0.875rem;
   
   
   border-radius: 3px;
   
   z-index: 1;
}

/* dogEar for .desc */
span.annotation > .dogEar{
   bottom: calc(100% + 0.89rem);
   left: 0.2rem;
   width: 15px;
   height: 15px;
   
   transform: rotate(45deg) translateY(50%);/**/
   z-index: 2;
   
   border-top: none;
   border-left: none;
}
/* togglable description block *
span.annotation .shadow{
   content: '';
   position: absolute;
   display: block;
   top: 100%;
   left: 100%;
   width: 100px;
   height: 1rem;
   z-index: -10;
   box-shadow: 0 0 8px 0 rgba(0,0,0,0.15);
}/**/
span.annotation > .desc:hover,
span.annotation > .desc.visible,
span.annotation > .desc.visible + .dogEar{
   display: table;
}
span.annotation > .desc.hidden{
   display: none;
}

html.dark span.annotation > .desc,
html.dark span.annotation > .dogEar{
   background: rgba(15,15,10,0.8) !important;
   color: #aaa !important;
   border: 1px solid #444;
}
html.dark span.annotation > .dogEar{
   border-top: none;
   border-left: none;
}